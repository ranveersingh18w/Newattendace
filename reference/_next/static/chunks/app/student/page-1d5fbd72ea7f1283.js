(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7454],{381:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5040:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},13052:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},15448:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},28883:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},33109:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},39033:(e,t,s)=>{"use strict";s.d(t,{c:()=>r});var a=s(12115);function r(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}},40968:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var a=s(12115),r=s(63655),l=s(95155),i=a.forwardRef((e,t)=>(0,l.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},46081:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,q:()=>l});var a=s(12115),r=s(95155);function l(e,t){let s=a.createContext(t),l=e=>{let{children:t,...l}=e,i=a.useMemo(()=>l,Object.values(l));return(0,r.jsx)(s.Provider,{value:i,children:t})};return l.displayName=e+"Provider",[l,function(r){let l=a.useContext(s);if(l)return l;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function i(e,t=[]){let s=[],l=()=>{let t=s.map(e=>a.createContext(e));return function(s){let r=s?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return l.scopeName=e,[function(t,l){let i=a.createContext(l),o=s.length;s=[...s,l];let d=t=>{let{scope:s,children:l,...d}=t,n=s?.[e]?.[o]||i,c=a.useMemo(()=>d,Object.values(d));return(0,r.jsx)(n.Provider,{value:c,children:l})};return d.displayName=t+"Provider",[d,function(s,r){let d=r?.[e]?.[o]||i,n=a.useContext(d);if(n)return n;if(void 0!==l)return l;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=s.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}(l,...t)]}},48136:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},52712:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});var a=s(12115),r=globalThis?.document?a.useLayoutEffect:()=>{}},53580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(12115);let r=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);l.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],n={toasts:[]};function c(e){n=o(n,e),d.forEach(e=>{e(n)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(n);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},53904:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},60817:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(95155),r=s(12115),l=s(35695),i=s(6874),o=s.n(i),d=s(53904),n=s(33109),c=s(69074),u=s(14186),m=s(87949),x=s(381),h=s(72713),p=s(13052),f=s(71007),g=s(69803),v=s(5040),y=s(92657),j=s(15448),N=s(28883),w=s(48136),b=s(17580),k=s(4516),A=s(97168),E=s(89852),S=s(82714),P=s(88482),T=s(88145),M=s(69663),C=s(45250),R=s(41387),F=s(84867),I=s(66982),D=s(98045),L=s(19764);function _(){let e=(0,l.useRouter)(),{student:t,isLoading:s,logout:i,refreshProfile:_}=(0,F.H)(),[O,U]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(!1),[B,$]=(0,r.useState)(""),[W,q]=(0,r.useState)(null),[H,V]=(0,r.useState)(!1),[G,J]=(0,r.useState)(null),[X,Y]=(0,r.useState)(!0),[K,Q]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s||t||e.push("/auth/student/login")},[s,t,e]),(0,r.useEffect)(()=>(K?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[K]),(0,r.useEffect)(()=>{let e=()=>et(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{s||t||e.push("/auth/student/login")},[s,t,e]),(0,r.useEffect)(()=>{(async()=>{if(t)try{let e=await I.Z.getDashboardStats();J(e)}catch(e){console.error("Failed to fetch dashboard stats:",e)}finally{Y(!1)}})()},[t]),(0,r.useEffect)(()=>{if(console.log("Modal condition check:",{authLoading:s,student:t}),!s&&t){let e=t.mobileNumber&&t.mobileNumber.trim().length>0,s=t.profilePicture&&t.profilePicture.trim().length>0;console.log("Modal conditions:",{hasMobileNumber:e,hasProfilePicture:s,profilePicture:t.profilePicture,showProfilePictureModal:Z}),e?s||Z?s&&z(!1):z(!0):(U(!0),z(!1))}else U(!1),z(!1),$("")},[s,t]);let es=async()=>{if(q(null),!B||10!==B.length){q("Mobile number must be exactly 10 digits.");return}if(t){V(!0);try{await I.Z.updateProfile({name:t.name,email:t.email,mobileNumber:B});try{await _()}catch(e){console.error("Failed to refresh profile, but mobile number was updated:",e)}U(!1),$("")}catch(e){q((null==e?void 0:e.message)||"Failed to update mobile number. Try again.")}finally{V(!1)}}};return s?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):t?s||X||!t||!G?(0,a.jsx)("div",{className:"flex h-screen bg-background items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[O&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add your mobile number"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"We need your 10-digit mobile number to proceed. This modal will not close until you add a valid number."}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"mobile",children:"Mobile Number"}),(0,a.jsx)(E.p,{id:"mobile",name:"mobile",value:B,onChange:e=>{$(e.target.value.replace(/\D/g,"")),q(null)},placeholder:"Enter 10-digit number",maxLength:10,className:"w-full",disabled:H}),W&&(0,a.jsx)("p",{className:"text-xs text-red-600",children:W})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-2",children:[(0,a.jsx)(A.$,{variant:"outline",disabled:!0,children:"Close"}),(0,a.jsx)(A.$,{onClick:es,disabled:H,children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):"Save"})]})]})}),Z&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add your profile picture"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Please upload a profile picture to continue."}),(0,a.jsx)(D.v,{onUpload:async()=>{console.log("Profile picture upload completed, refreshing profile..."),console.log("Student before refresh:",t);try{let e=await _();console.log("Profile refreshed successfully:",e),await new Promise(e=>setTimeout(e,500)),(null==e?void 0:e.profilePicture)?(console.log("Profile picture found after refresh, closing modal"),z(!1)):console.log("Profile picture still not found after refresh")}catch(e){console.error("Failed to refresh profile:",e)}},role:"student"}),(0,a.jsx)("div",{className:"mt-4 flex items-center justify-end gap-2",children:(0,a.jsx)(A.$,{variant:"outline",onClick:()=>z(!1),children:"Skip for now"})})]})}),(0,a.jsx)("div",{className:"hidden md:flex",children:(0,a.jsx)(R.z,{role:"student"})}),K&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>Q(!1)}),(0,a.jsx)(R.z,{role:"student",isOpen:K,onClose:()=>Q(!1),isMobile:!0}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(C.a,{role:"student",user:{name:(null==t?void 0:t.name)||"Student",email:(null==t?void 0:t.email)||"",avatar:null==t?void 0:t.profilePicture},onMenuClick:ee?()=>Q(!0):void 0,isMobile:ee}),(0,a.jsx)("div",{className:"flex-1 overflow-auto bg-muted/40",children:(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold",children:["Welcome back, ",t.name.split(" ")[0],"!"]}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Here's your attendance overview and quick actions"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(T.E,{variant:"outline",className:"text-xs sm:text-sm",children:t.rollNumber})})]}),(0,a.jsxs)("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[(0,a.jsxs)(P.Zp,{className:"p-2 sm:p-4",children:[(0,a.jsxs)(P.aR,{className:"flex flex-row items-center justify-between p-2 sm:pb-2",children:[(0,a.jsx)(P.ZB,{className:"text-xs sm:text-sm font-medium",children:"Overall Attendance"}),(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})]}),(0,a.jsxs)(P.Wu,{className:"p-2 pt-0 sm:p-4 sm:pt-0",children:[(0,a.jsxs)("div",{className:"text-lg sm:text-2xl font-bold",children:[G.overallAttendance,"%"]}),(0,a.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Total attendance percentage"})]})]}),(0,a.jsxs)(P.Zp,{className:"p-2 sm:p-4",children:[(0,a.jsxs)(P.aR,{className:"flex flex-row items-center justify-between p-2 sm:pb-2",children:[(0,a.jsx)(P.ZB,{className:"text-xs sm:text-sm font-medium",children:"This Month"}),(0,a.jsx)(c.A,{className:"h-4 w-4 opacity-50"})]}),(0,a.jsxs)(P.Wu,{className:"p-2 pt-0 sm:p-4 sm:pt-0",children:[(0,a.jsxs)("div",{className:"text-lg sm:text-2xl font-bold",children:[G.monthlyAttendance,"%"]}),(0,a.jsxs)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[G.attendedClassesThisMonth,"/",G.totalClassesThisMonth," classes"]})]})]}),(0,a.jsxs)(P.Zp,{className:"p-2 sm:p-4",children:[(0,a.jsxs)(P.aR,{className:"flex flex-row items-center justify-between p-2 sm:pb-2",children:[(0,a.jsx)(P.ZB,{className:"text-xs sm:text-sm font-medium",children:"This Week"}),(0,a.jsx)(u.A,{className:"h-4 w-4 opacity-50"})]}),(0,a.jsxs)(P.Wu,{className:"p-2 pt-0 sm:p-4 sm:pt-0",children:[(0,a.jsxs)("div",{className:"text-lg sm:text-2xl font-bold",children:[G.weeklyAttendance,"%"]}),(0,a.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Weekly attendance rate"})]})]}),(0,a.jsxs)(P.Zp,{className:"p-2 sm:p-4",children:[(0,a.jsxs)(P.aR,{className:"flex flex-row items-center justify-between p-2 sm:pb-2",children:[(0,a.jsx)(P.ZB,{className:"text-xs sm:text-sm font-medium",children:"Enrolled Courses"}),(0,a.jsx)(m.A,{className:"h-4 w-4 opacity-50"})]}),(0,a.jsxs)(P.Wu,{className:"p-2 pt-0 sm:p-4 sm:pt-0",children:[(0,a.jsx)("div",{className:"text-lg sm:text-2xl font-bold",children:G.totalEnrolledCourses}),(0,a.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Active enrollments"})]})]})]}),(0,a.jsxs)(P.Zp,{children:[(0,a.jsxs)(P.aR,{className:"p-4 sm:p-6",children:[(0,a.jsxs)(P.ZB,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Quick Actions"]}),(0,a.jsx)(P.BT,{className:"text-xs sm:text-sm",children:"Access your most used features quickly"})]}),(0,a.jsx)(P.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(o(),{href:"/student/attendance",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors cursor-pointer group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted group-hover:bg-muted/80 transition-colors",children:(0,a.jsx)(h.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:"View Attendance"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Check detailed records"})]})]}),(0,a.jsx)(p.A,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]})}),(0,a.jsx)(o(),{href:"/student/profile",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors cursor-pointer group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted group-hover:bg-muted/80 transition-colors",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:"Profile"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Manage your info"})]})]}),(0,a.jsx)(p.A,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]})}),(0,a.jsx)(o(),{href:"/student/change-password",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors cursor-pointer group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted group-hover:bg-muted/80 transition-colors",children:(0,a.jsx)(g.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:"Change Password"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Update security"})]})]}),(0,a.jsx)(p.A,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600"})]})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)(P.Zp,{className:"overflow-hidden",children:[(0,a.jsxs)(P.aR,{className:"p-4 sm:p-6",children:[(0,a.jsxs)(P.ZB,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),"Recent Activity"]}),(0,a.jsx)(P.BT,{className:"text-xs sm:text-sm",children:"Your latest attendance records"})]}),(0,a.jsxs)(P.Wu,{children:[(0,a.jsx)("div",{className:"space-y-4",children:G.recentActivity.slice(0,4).map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start justify-between p-3 border rounded-lg hover:bg-muted/50 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 w-full",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-muted",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm sm:text-base",children:e.course}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[new Date(e.date).toLocaleDateString()," •"," ",new Date(e.markedAt).toLocaleTimeString()]})]})]}),(0,a.jsx)(T.E,{variant:"PRESENT"===e.status?"default":"outline",className:"text-xs w-full sm:w-auto justify-center",children:e.status})]},t))}),(0,a.jsx)(P.wL,{className:"px-0 pt-4",children:(0,a.jsx)(o(),{href:"/student/attendance",className:"w-full",children:(0,a.jsxs)(A.$,{variant:"outline",className:"w-full",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"View All Records"]})})})]})]}),(0,a.jsxs)(P.Zp,{className:"overflow-hidden",children:[(0,a.jsxs)(P.aR,{className:"p-4 sm:p-6",children:[(0,a.jsxs)(P.ZB,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[(0,a.jsx)(f.A,{className:"h-5 w-5"}),"Profile Summary"]}),(0,a.jsx)(P.BT,{className:"text-xs sm:text-sm",children:"Your academic information"})]}),(0,a.jsxs)(P.Wu,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(M.eu,{className:"h-12 w-12 sm:h-16 sm:w-16",children:t.profilePicture?(0,a.jsxs)("div",{children:[console.log("Rendering AuthenticatedImage with profilePicture:",t.profilePicture),(0,a.jsx)(L.v,{src:t.profilePicture,alt:t.name,className:"h-full w-full object-cover rounded-full",role:"student"})]}):(0,a.jsx)(M.q5,{className:"text-base sm:text-lg font-semibold",children:t.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:t.name}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(j.A,{className:"h-3 w-3"}),t.rollNumber]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Email:"}),(0,a.jsx)("span",{className:"font-medium truncate",children:t.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Department:"}),(0,a.jsx)("span",{className:"font-medium",children:t.department.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Batch:"}),(0,a.jsx)("span",{className:"font-medium",children:t.batch.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)(T.E,{variant:"ACTIVE"===t.status?"default":"outline",className:"text-xs",children:t.status})]})]})]}),(0,a.jsx)(P.wL,{className:"px-0 pt-4",children:(0,a.jsx)(o(),{href:"/student/profile",className:"w-full",children:(0,a.jsxs)(A.$,{variant:"outline",className:"w-full",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})})]})]})]})]})})]})]}):null}},63655:(e,t,s)=>{"use strict";s.d(t,{hO:()=>d,sG:()=>o});var a=s(12115),r=s(47650),l=s(99708),i=s(95155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let s=a.forwardRef((e,s)=>{let{asChild:a,...r}=e,o=a?l.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...r,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function d(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}},66982:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(31886);let r=()=>{let e=localStorage.getItem("studentToken");if(!e)throw Error("No student authentication token found");return(0,a.hU)(e)},l={async register(e){try{return(await a.FH.post("/student/auth/register",e)).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Registration failed")}},async verifyEmail(e){try{return(await a.FH.post("/student/auth/verify-email",{token:e})).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Email verification failed")}},async resendEmailVerification(e){try{return(await a.FH.post("/student/auth/resend-verification",{rollNumber:e})).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to resend verification email")}},async login(e){try{let t=await a.FH.post("/student/auth/login",e);if(!t.data.token)return console.error("Login failed: No token received"),t.data.message;localStorage.setItem("studentToken",t.data.token),localStorage.setItem("studentId",t.data.student.id),localStorage.setItem("userType","student");try{r().post("/student/dashboard/activity-log",{action:"STUDENT_LOGIN"}).catch(()=>{})}catch(e){}return{token:t.data.token,student:t.data.student}}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Login failed")}},async logout(){try{localStorage.removeItem("studentToken"),localStorage.removeItem("studentId"),localStorage.removeItem("userType")}catch(e){throw Error("Logout failed")}},async getCurrentStudent(){try{return(await r().get("/student/dashboard/me")).data}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch current student")}},async requestPasswordReset(e){try{return(await a.FH.post("/student/auth/request-password-reset",{email:e})).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Password reset request failed")}},async resetPassword(e,t){try{return(await a.FH.post("/student/auth/reset-password",{token:e,password:t})).data}catch(e){var s,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Password reset failed")}},async changePassword(e,t,s){try{return(await r().post("/student/auth/change-password",{studentId:e,oldPassword:t,newPassword:s})).data}catch(e){var a,l;throw Error((null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)||"Password change failed")}},async getDashboardStats(){try{return(await r().get("/student/dashboard/stats")).data}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch dashboard stats")}},async getProfile(){try{return(await r().get("/student/dashboard/profile")).data}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch profile")}},async updateProfile(e){try{let t=await r().put("/student/dashboard/profile",e);try{r().post("/student/dashboard/activity-log",{action:"STUDENT_PROFILE_UPDATE",details:e}).catch(()=>{})}catch(e){}return t.data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to update profile")}},async getAttendanceRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await r().get("/student/dashboard/attendance/records",{params:e})).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to fetch attendance records")}},async getAttendanceStats(){try{return(await r().get("/student/dashboard/attendance/stats")).data}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch attendance stats")}},async getEnrolledCourses(){try{return(await r().get("/student/dashboard/courses")).data}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch enrolled courses")}},async createActivityLog(e){try{return(await r().post("/student/dashboard/activity-log",{action:e.action,details:e.details})).data}catch(e){return console.error("Failed to create student activity log:",e),null}}}},69074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},69803:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},82714:(e,t,s)=>{"use strict";s.d(t,{J:()=>n});var a=s(95155),r=s(12115),l=s(40968),i=s(74466),o=s(53999);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,o.cn)(d(),s),...r})});n.displayName=l.b.displayName},84867:(e,t,s)=>{"use strict";s.d(t,{H:()=>o,h:()=>d});var a=s(95155),r=s(12115),l=s(66982);let i=(0,r.createContext)(void 0),o=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useStudentAuth must be used within a StudentAuthProvider");return e},d=e=>{let{children:t}=e,[s,o]=(0,r.useState)(null),[d,n]=(0,r.useState)(!0),c=async()=>{try{if(localStorage.getItem("studentToken")){let e=await l.Z.getProfile();return console.log("Profile refreshed:",e),o(e),e}}catch(e){throw console.error("Failed to refresh profile:",e),x(),e}};(0,r.useEffect)(()=>{(async()=>{try{localStorage.getItem("studentToken")&&await c()}catch(e){console.error("Auth initialization error:",e)}finally{n(!1)}})()},[]);let u=async(e,t,s)=>{o((await l.Z.login({rollNumber:e,email:t,password:s})).student)},m=async(e,t,s)=>await l.Z.register({rollNumber:e,email:t,password:s}),x=()=>{l.Z.logout(),o(null)};return(0,a.jsx)(i.Provider,{value:{student:s,isLoading:d,isAuthenticated:!!s,login:u,register:m,logout:x,refreshProfile:c},children:t})}},88145:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var a=s(95155);s(12115);var r=s(74466),l=s(53999);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:s}),t),...r})}},88482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>n,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>o,wL:()=>u});var a=s(95155),r=s(12115),l=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});d.displayName="CardTitle";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});n.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},89852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(95155),r=s(12115),l=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},91029:(e,t,s)=>{Promise.resolve().then(s.bind(s,60817))},92657:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},98045:(e,t,s)=>{"use strict";s.d(t,{v:()=>n});var a=s(95155),r=s(12115),l=s(53580),i=s(97168),o=s(89852),d=s(31886);function n(e){let{onUpload:t,role:s,onPreviewChange:n}=e,[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),{toast:j}=(0,l.dj)();(0,r.useEffect)(()=>()=>{v&&URL.revokeObjectURL(v)},[v]);let N=async e=>{var a,r,l,i,o,m;if(e.preventDefault(),console.log("Upload form submitted"),!c){j({title:"No file selected",description:"Please select a file to upload."});return}if(h){j({title:"Cannot upload",description:h,variant:"destructive"});return}console.log("File selected:",c.name,"Size:",c.size,"Type:",c.type),x(!0);let p=new FormData;p.append("profilePicture",c);let f="student"===s?"/student/dashboard/profile-picture":"/upload/profile-picture";console.log("Upload URL:",f);try{console.log("Token found, proceeding with upload...");let e=await (()=>{let e="student"===s?localStorage.getItem("studentToken"):localStorage.getItem("token");if(!e)throw Error("No authentication token found");return(0,d.hU)(e)})().post(f,p,{headers:{"Content-Type":"multipart/form-data"}});console.log("Upload response:",e.data),j({title:"Success",description:"Profile picture uploaded successfully."});let l=new CustomEvent("profilePictureUpdated",{detail:{profilePicture:(null===(a=e.data)||void 0===a?void 0:a.profilePicture)||(null===(r=e.data)||void 0===r?void 0:r.url),timestamp:Date.now()}});window.dispatchEvent(l),console.log("Profile picture update event dispatched"),g(!0),u(null),y(null),n&&n(null),t&&(console.log("Calling onUpload callback..."),await t())}catch(e){console.error("Upload error:",e),console.error("Error response:",null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.data),console.error("Error status:",null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status),j({title:"Error",description:(null==e?void 0:null===(m=e.response)||void 0===m?void 0:null===(o=m.data)||void 0===o?void 0:o.message)||"Failed to upload profile picture."})}finally{x(!1)}};return(0,a.jsxs)("form",{onSubmit:N,className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.p,{id:"profilePictureInput",type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];u(t),p(null),g(!1);let s=new FileReader;if(s.onload=e=>{var t;let s=null===(t=e.target)||void 0===t?void 0:t.result;y(s),n&&n(s)},s.readAsDataURL(t),t.size>2097152){p("File too large. Maximum size is 2MB."),j({title:"File too large",description:"Please select an image smaller than 2MB.",variant:"destructive"});return}if(!["image/jpeg","image/jpg","image/png"].includes(t.type)){p("Invalid file type. Only JPEG and PNG images are allowed."),j({title:"Invalid file type",description:"Please select a JPEG or PNG image.",variant:"destructive"});return}}else u(null),p(null),g(!1),y(null),n&&n(null)},accept:"image/png,image/jpeg,image/jpg",className:"hidden ".concat(h?"border-red-500":"")})}),!f&&c&&!h&&(0,a.jsx)(i.$,{type:"submit",disabled:m||!c||!!h,size:"sm",className:"w-full max-w-[120px] mx-auto",children:m?"Uploading...":"Upload"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9268,2217,3455,6874,3063,7028,738,8441,1684,7358],()=>t(91029)),_N_E=e.O()}]);